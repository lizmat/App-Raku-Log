<html>
<head>
  <title>#<.channel> Live</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <h1 align="center" style="font-weight: bold">#<.channel> Live</h1>
  <&links($_, .channel)>
  <hr/>
  <table class="chat" valign="top">
    <@entries>
      <?{ .human-date }><tr><td class="date" colspan="2"><hr/><a href="<.date>.html"><.human-date><hr/></td></tr></?>
      <?.control-events>
        <tr class="special" id="<.relative-target>"><td colspan="2"><a href="<.date>.html#<.relative-target>">ยง</a>
        <@targets><a name="<$_>"/></@>
        <@control-events>
          <b><.key></b> <&HTML(.value)>
        </@>
        </td></tr>
      </?>
      <!.control-events>
        <?{ .sender && .sender ne '"'}>
          <!{ .commit }>
            <tr id="nick">
              <td class="nick" style="font-size: 110%;"><&HTML(.sender)></td>
              <td id="<.relative-target>" align="right"><a href="<.date>.html#<.relative-target>">ยง</a></td>
            </tr>
          </!>
        </?>
        <tr><td class="talk odd"
          <?{ .commit }> id="commit"</?>
          <?{ .test-t }> id="test-t"</?>
        ><@targets><a name="<$_>"/></@>
        <&HTML(.message)></td>
        <?.hh-mm>
          <td align="right"><.hh-mm></td>
        </?>
        <!.hh-mm>
          <td></td>
        </!>
        </tr>
      </!>
    </@>
  </table>
  <div id="footer">Powered by <a href="https://cro.services">Cro</a> and the <a href="https://raku.org">Raku Programming Language</a><br/>
  Please report any issues / comments / feature requests <a href="https://github.com/lizmat/App-IRC-Log/issues">as an issue on App::IRC::Log</a>. Thank you!</div>
</body>
</html>

<:sub links($_, $channel)>
<hr/>
<table width="100%">
  <tr>
    <td>
      <form action="search.html">Search&nbsp;<input name="query"/></form>
    </td>
    <td align="right">
      <form>
      <label for="channel">Channel</label>
      <select name="channel" id="channel" onchange="if (this.value) window.location.href=this.value">>
        <@channels>
          <option value="/<$_>/live.html"<?{ $_ eq $channel }> selected</?>><$_></option>
        </@>
      </select>
      </form>
    </td>
    <td align="right">
      <a href="today">Today</a>
      <a href="index.html">Index</a>
      <a href="/home.html">Home</a>
    </td>
  </tr>
</table>
</:>
