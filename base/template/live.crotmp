<html>
<head>
  <title>#<.channel> Live</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="style.css">
  <script type="text/javascript">
    function scrollToBottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }
    history.scrollRestoration = "manual";
    window.onload = scrollToBottom;
  </script>
</head>
<body>
  <h1 align="center" style="font-weight: bold">#<.channel> Live</h1>
  <&links($_, .channel)>
  <hr/>
  <table class="chat" valign="top">
    <tr><td><a href="scroll-up.html?target=<.up-target>">scroll up</a></td></tr>
    <@entries>
      <?{ .human-date }>
        <tr<?.up-removable> id="up-removable"</?><?.down-removable> id="down-removable"</?>>
          <td class="date" colspan="2"><hr/><a href="<.date>.html"><.human-date><hr/></td>
        </tr>
      </?>
      <?{ .sender && .sender ne '"'}>
        <!{ .commit }>
          <tr id="nick"<?.up-removable> id="up-removable"</?><?.down-removable> id="down-removable"</?>>
            <td class="nick" style="font-size: 110%;"><&HTML(.sender)></td>
            <td id="<.relative-target>" align="right"><a href="<.date>.html#<.relative-target>">ยง</a></td>
          </tr>
        </!>
      </?>
      <tr<?.up-removable> id="up-removable"</?><?.down-removable> id="down-removable"</?>>
        <td class="talk odd"
          <?{ .commit }> id="commit"</?>
          <?{ .test-t }> id="test-t"</?>
        ><&HTML(.message)></td>
        <?.hh-mm>
          <td align="right"><.hh-mm></td>
        </?>
        <!.hh-mm>
          <td></td>
        </!>
      </tr>
    </@>
    <tr><td><a href="scroll-down.html?target=<.down-target>&current-entries=<.down-entries>">scroll down</a></td></tr>
  </table>
  <div id="footer">Powered by <a href="https://cro.services">Cro</a> and the <a href="https://raku.org">Raku Programming Language</a><br/>
  Please report any issues / comments / feature requests <a href="https://github.com/lizmat/App-IRC-Log/issues">as an issue on App::IRC::Log</a>. Thank you!</div>
</body>
</html>

<:sub links($_, $channel)>
<hr/>
<table width="100%">
  <tr>
    <td>
      <form action="search.html">Search&nbsp;<input name="query"/></form>
    </td>
    <td align="right">
      <form>
      <label for="channel">Channel</label>
      <select name="channel" id="channel" onchange="if (this.value) window.location.href=this.value">>
        <@channels>
          <option value="/<$_>/live.html"<?{ $_ eq $channel }> selected</?>><$_></option>
        </@>
      </select>
      </form>
    </td>
    <td align="right">
      <a href="today">Today</a>
      <a href="index.html">Index</a>
      <a href="/home.html">Home</a>
    </td>
  </tr>
</table>
</:>
